(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["game"],{"4bd2":function(e,t,s){"use strict";s("6e6c")},"4de4":function(e,t,s){"use strict";var r=s("23e7"),n=s("b727").filter,a=s("1dde"),i=a("filter");r({target:"Array",proto:!0,forced:!i},{filter:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},"567b":function(e,t,s){},"6e6c":function(e,t,s){},"7d36":function(e,t,s){"use strict";s.r(t);var r=s("7a23"),n={class:"screen game-screen"},a={class:"game-screen-header"},i={class:"game-screen-title"},o=["innerHTML"],c=["innerHTML"],l={class:"game-screen-progress"},d={class:"game-screen-progress-level"},u={class:"title"},b={class:"subtitle"},h={class:"title"},m={class:"subtitle"},v=Object(r["j"])("div",{class:"subcircle"},null,-1),f={class:"subprogress",viewPort:"0 0 180 180",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},j=["stroke-dashoffset"],O={class:"game-screen-main"},p={class:"game-screen-footer"},g=["innerHTML"];function w(e,t,s,w,y,$){var L=Object(r["F"])("logo"),I=Object(r["F"])("letters-table"),M=Object(r["F"])("game-timer"),S=Object(r["F"])("words-table");return Object(r["z"])(),Object(r["i"])("div",n,[Object(r["j"])("header",a,[Object(r["m"])(L),Object(r["j"])("div",i,[Object(r["j"])("div",{class:"game-screen-title-line-1",innerHTML:e.$t("gameInfo")},null,8,o),Object(r["j"])("div",{class:"game-screen-title-line-1",innerHTML:e.secondLineMessage},null,8,c)]),Object(r["j"])("div",l,[Object(r["j"])("div",d,[Object(r["j"])("div",u,Object(r["I"])(e.$store.state.gameState.lvlNumber),1),Object(r["j"])("div",b,Object(r["I"])(e.$t("level")),1)]),Object(r["j"])("div",{class:Object(r["t"])(["game-screen-progress-points",{orange:e.points>=e.donePoints}])},[Object(r["j"])("div",h,Object(r["I"])(e.points)+"/"+Object(r["I"])(e.donePoints),1),Object(r["j"])("div",m,Object(r["I"])(e.$t("points")),1),v,(Object(r["z"])(),Object(r["i"])("svg",f,[Object(r["j"])("circle",{class:Object(r["t"])(["subprogress-circle",{done:e.points>=e.donePoints}]),r:"75",cx:"90",cy:"90","stroke-dasharray":"565.48","stroke-dashoffset":e.progressStroke},null,10,j)]))],2)])]),Object(r["j"])("main",O,[Object(r["m"])(I,{class:"game-screen-letters",letters:e.letters},null,8,["letters"]),Object(r["m"])(M,{class:"game-screen-timer",onExpired:e.endGame,onAlmostOver:e.uncoverLetters},null,8,["onExpired","onAlmostOver"]),Object(r["m"])(S,{class:"game-screen-words",words:e.words},null,8,["words"])]),Object(r["j"])("footer",p,[Object(r["j"])("div",{class:Object(r["t"])(["game-screen-footer-new-word",{animated:e.newWordAppear}]),innerHTML:e.newWordMessage},null,10,g)])])}var y=s("d4ec"),$=s("262e"),L=s("2caf"),I=(s("d3b7"),s("159b"),s("99af"),s("ac1f"),s("5319"),s("1276"),s("7db0"),s("4de4"),s("9ab4")),M=s("ce1f"),S=s("1db6"),x=s("2241"),k={class:"letters-table"};function A(e,t,s,n,a,i){var o=Object(r["F"])("letter-visual");return Object(r["z"])(),Object(r["i"])("div",k,[Object(r["m"])(r["d"],{name:"letters-table-anim",tag:"div",class:"letters-table-container"},{default:Object(r["M"])((function(){return[(Object(r["z"])(!0),Object(r["i"])(r["a"],null,Object(r["E"])(e.letters,(function(e){return Object(r["z"])(),Object(r["g"])(o,{letter:e,key:e.id},null,8,["letter"])})),128))]})),_:1})])}var P={class:"letter-visual"},N={class:"letter-visual-points"};function T(e,t,s,n,a,i){return Object(r["z"])(),Object(r["i"])("div",P,[Object(r["j"])("div",{class:Object(r["t"])(["letter-visual-self",{red:e.letter.fake&&e.letter.uncovered,animated:e.uncoverAnim,orange:e.letter.hidden}])},Object(r["I"])(e.displayedLetter),3),Object(r["j"])("div",N,Object(r["I"])(e.letter.points),1)])}var z=function(e){Object($["a"])(s,e);var t=Object(L["a"])(s);function s(){return Object(y["a"])(this,s),t.apply(this,arguments)}return s}(M["b"]);z=Object(I["a"])([Object(M["a"])({props:{letter:Object},data:function(){return{uncoverAnim:!1}},computed:{displayedLetter:function(){return this.letter.hidden&&!this.letter.uncovered?"?":this.letter.letter}},watch:{"letter.uncovered":function(){var e=this;this.uncoverAnim=!0,setTimeout((function(){return e.uncoverAnim=!1}),1100)}}})],z);var W=z,E=(s("9620"),s("6b0d")),_=s.n(E);const R=_()(W,[["render",T]]);var C=R,H=function(e){Object($["a"])(s,e);var t=Object(L["a"])(s);function s(){return Object(y["a"])(this,s),t.apply(this,arguments)}return s}(M["b"]);H=Object(I["a"])([Object(M["a"])({components:{LetterVisual:C},props:{letters:Array}})],H);var F=H;s("4bd2");const G=_()(F,[["render",A]]);var D=G,U={class:"game-timer"},J=Object(r["j"])("div",{class:"game-timer-icon mdi mdi-timer-sand-full"},null,-1),V={class:"game-timer-bar"};function q(e,t,s,n,a,i){return Object(r["z"])(),Object(r["i"])("div",U,[J,Object(r["j"])("div",V,[Object(r["j"])("div",{class:Object(r["t"])(["game-timer-line",{danger:e.timeAlmostOver}]),style:Object(r["u"])({width:"".concat(99*e.time/e.max+1,"%")})},null,6)])])}s("a9e3");var B=s("431c"),K=function(e){Object($["a"])(s,e);var t=Object(L["a"])(s);function s(){return Object(y["a"])(this,s),t.apply(this,arguments)}return s}(M["b"]);K=Object(I["a"])([Object(M["a"])({props:{max:{type:Number,default:120}},emits:["expired","almost-over"],data:function(){return{timerId:null,timeAlmostOver:!1,time:120}},methods:{decrease:function(){this.time>0?(this.time--,20==this.time&&(this.timeAlmostOver=!0,this.$emit("almost-over")),(this.time<=20&&this.time%5==0||this.time<=5)&&B["a"].playSfx("time_almost_over")):(this.$emit("expired"),clearInterval(this.timerId))}},watch:{"$store.state.gameState.lvlGenerated":function(e){e&&(clearInterval(this.timerId),this.time=150,this.timeAlmostOver=!1,this.timerId=setInterval(this.decrease,1e3))}},mounted:function(){this.timerId=setInterval(this.decrease,1e3)},beforeUnmount:function(){clearInterval(this.timerId)}})],K);var Q=K;s("8c1e");const X=_()(Q,[["render",q]]);var Y=X,Z={class:"words-table"},ee=["onClick"],te={class:"words-table-letters"},se=["data-letter"],re={class:"words-table-nickname"};function ne(e,t,s,n,a,i){return Object(r["z"])(),Object(r["i"])("div",Z,[(Object(r["z"])(!0),Object(r["i"])(r["a"],null,Object(r["E"])(e.words,(function(t){return Object(r["z"])(),Object(r["i"])("div",{class:Object(r["t"])(["words-table-word",{uncovered:t.uncovered,failed:t.failed}]),key:t.word,onClick:function(s){return e.openWiktionary(t)}},[Object(r["j"])("div",te,[(Object(r["z"])(!0),Object(r["i"])(r["a"],null,Object(r["E"])(t.word,(function(e,t){return Object(r["z"])(),Object(r["i"])("span",{class:"letter",key:t,"data-letter":e},Object(r["I"])(e),9,se)})),128))]),Object(r["j"])("div",re,Object(r["I"])(t.player),1)],10,ee)})),128))])}var ae=function(e){Object($["a"])(s,e);var t=Object(L["a"])(s);function s(){return Object(y["a"])(this,s),t.apply(this,arguments)}return s}(M["b"]);ae=Object(I["a"])([Object(M["a"])({props:{words:Array},methods:{openWiktionary:function(e){e.uncovered&&window.open("https://ru.wiktionary.org/wiki/".concat(e.word),"_blank")}}})],ae);var ie=ae;s("cbfd");const oe=_()(ie,[["render",ne]]);var ce=oe,le=function(e){Object($["a"])(s,e);var t=Object(L["a"])(s);function s(){return Object(y["a"])(this,s),t.apply(this,arguments)}return s}(M["b"]);le=Object(I["a"])([Object(M["a"])({components:{Logo:x["a"],LettersTable:D,GameTimer:Y,WordsTable:ce},data:function(){return{letters:[],words:[],players:{},points:0,donePoints:0,maxPoints:0,shuffleTimerId:null,timeOut:!1,goalReached:!1,wordsLeft:0,newWordMessage:"",newWordAppear:!1}},methods:{shuffleLetters:function(){for(var e=this.letters.length-1;e>0;e--){var t=Math.floor(Math.random()*(e+1)),s=this.letters[e];this.letters[e]=this.letters[t],this.letters[t]=s}},loadLevel:function(){this.letters=Object(r["C"])(this.$store.state.gameState.lvlData.letters),this.words=Object(r["C"])(this.$store.state.gameState.lvlData.words),this.donePoints=this.$store.state.gameState.lvlData.donePoints,this.maxPoints=this.$store.state.gameState.lvlData.maxPoints,this.wordsLeft=this.words.length,this.shuffleLetters(),console.log(this.words)},endGame:function(){this.timeOut||(this.timeOut=!0,this.uncoverAllWords(),this.$store.dispatch("applyPlayerPoints",this.players),setTimeout(this.points>=this.donePoints?this.nextLevel:this.gameOver,4e3))},nextLevel:function(){B["a"].playSfx("level_complete"),this.$store.dispatch("applyEarnedPoints",this.points),this.$router.push("/nextlevel")},gameOver:function(){B["a"].playSfx("game_over"),this.$router.push("/gameover")},uncoverLetters:function(){this.letters.forEach((function(e){e.uncovered||!e.fake&&!e.hidden||(e.uncovered=!0)}))},uncoverAllWords:function(){this.words.forEach((function(e){e.uncovered||(e.failed=!0,e.uncovered=!0)}))},showMessage:function(e,t){var s=this;this.newWordMessage='<b class="orange">'.concat(e,"</b> ").concat(this.$t("playerAddWord"),' <b class="orange">').concat(t.toUpperCase(),"</b>"),this.newWordAppear=!0,setTimeout((function(){return s.newWordAppear=!1}),2e3)},newMessage:function(e){var t=this;if(!this.timeOut){this.words.forEach((function(s){s.uncovered||s.word!=e.text.toLowerCase()||(s.uncovered=!0,e.userName=e.userName.replace("twyzis__","Псевдотвузяк"),s.player=e.userName,t.points+=s.points,t.wordsLeft--,t.showMessage(e.userName,s.word),t.points>=t.donePoints&&!t.goalReached?(B["a"].playSfx("goal_reached"),t.goalReached=!0):B["a"].playSfx("correct_word"),t.players[e.userName]||(t.players[e.userName]=0),t.players[e.userName]+=s.points,s.word.split("").forEach((function(e){var s=t.letters.find((function(t){return t.letter==e}));s.hidden&&!s.uncovered&&(s.uncovered=!0)})))})),0==this.wordsLeft&&(this.timeOut=!0,this.$store.dispatch("applyPlayerPoints",this.players),setTimeout(this.nextLevel,1e3));var s=this.letters.filter((function(e){return e.fake&&!e.uncovered}));0!=s.length&&(this.wordsLeft/this.words.length<.7&&(2==s.length||this.$store.state.gameState.lvlNumber<=27)&&(s[0].uncovered=!0),this.wordsLeft/this.words.length<.5&&1==s.length&&(s[0].uncovered=!0))}}},computed:{progressStroke:function(){return-471*this.points/this.maxPoints+566},secondLineMessage:function(){return this.$store.state.gameState.lvlNumber<=7?this.$t("gameNoModificators"):this.$store.state.gameState.lvlNumber>7&&this.$store.state.gameState.lvlNumber<=14?this.$t("gameModificator1Red"):this.$store.state.gameState.lvlNumber>14&&this.$store.state.gameState.lvlNumber<=27?this.$t("gameModificator1Red1Orange"):this.$store.state.gameState.lvlNumber>27&&this.$store.state.gameState.lvlNumber<=34?this.$t("gameModificator2Red1Orange"):this.$t("gameModificator2Red2Orange")}},watch:{"$store.state.gameState.lvlGenerated":function(e){e&&this.loadLevel()}},beforeMount:function(){this.$store.state.gameStarted?(this.loadLevel(),S["a"].events.onMessage=this.newMessage):this.$router.push("/")},mounted:function(){this.$store.dispatch("resetLastPlayerPoints"),this.shuffleTimerId=setInterval(this.shuffleLetters,1e4)},beforeUnmount:function(){clearInterval(this.shuffleTimerid)}})],le);var de=le;s("e20b");const ue=_()(de,[["render",w]]);t["default"]=ue},"8c1e":function(e,t,s){"use strict";s("b00b")},9620:function(e,t,s){"use strict";s("567b")},a0ce:function(e,t,s){},b00b:function(e,t,s){},b0ea:function(e,t,s){},cbfd:function(e,t,s){"use strict";s("a0ce")},e20b:function(e,t,s){"use strict";s("b0ea")}}]);
//# sourceMappingURL=game.88578b9a.js.map